{
  "permissions": {
    "allow": [
      "Bash(npm create:*)",
      "Bash(npm install)",
      "Bash(npm install:*)",
      "Bash(cat:*)",
      "Bash(npm run build:*)",
      "Bash(npm uninstall:*)",
      "Bash(powershell -Command \"Start-Process npm -ArgumentList ''run'',''dev'' -NoNewWindow\")",
      "Bash(curl:*)",
      "Bash(start \"\" \"F:/Code/Подписки\")",
      "Bash(cmd /c \"cd /d F:\\\\Code\\\\Подписки && npm run dev\")",
      "Bash(tasklist:*)",
      "Bash(taskkill:*)",
      "Bash(findstr:*)",
      "Bash(cmd /c \"taskkill /F /PID 10464\")",
      "Bash(cmd /c \"taskkill /F /PID 22388 && taskkill /F /PID 5980\")",
      "Bash(grep:*)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(dir:*)",
      "Bash(git commit:*)",
      "Bash(wc:*)",
      "Bash(gh:*)",
      "Bash(pip show:*)",
      "Bash(python deploy.py:*)",
      "Bash(git push:*)",
      "Bash(python check_logs.py:*)",
      "Bash(python setup_ngrok.py:*)",
      "Bash(python -c \"\nimport paramiko\nimport time\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== ngrok service status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status ngrok --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== ngrok logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u ngrok -n 30 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== ngrok service status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status ngrok --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== ngrok logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u ngrok -n 30 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Try manual ngrok start ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''pkill ngrok; sleep 1; ngrok http 80 --log=stdout &''\\)\nimport time\ntime.sleep\\(5\\)\n\nprint\\(''=== Check tunnels API ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1:4040/api/tunnels''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nNGROK_URL = ''https://bff135baf186.ngrok-free.app''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Updating backend .env ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={NGROK_URL}\nPORT=3001\nEOF''''''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Verify .env ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(f''cat {APP_PATH}/backend/.env''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Restarting subscription-tracker ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nimport time\ntime.sleep\\(3\\)\n\nprint\\(''=== Service status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status subscription-tracker --no-pager | head -15''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Recent logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u subscription-tracker -n 20 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nNGROK_TOKEN = ''2q8TLmjV0SjHaEAezdVHtTaH2sX_36dxbVz5LU5hEmyf5491v''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Finding ngrok location ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''which ngrok''\\)\nngrok_path = stdout.read\\(\\).decode\\(''utf-8''\\).strip\\(\\)\nprint\\(f''ngrok path: {ngrok_path}''\\)\n\nif ngrok_path:\n    # Update systemd service with correct path\n    print\\(''=== Updating ngrok service ===''\\)\n    ngrok_service = f''''''[Unit]\nDescription=Ngrok Tunnel\nAfter=network.target\n\n[Service]\nType=simple\nUser=root\nExecStart={ngrok_path} http 80 --log=stdout\nRestart=on-failure\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\n''''''\n    stdin, stdout, stderr = ssh.exec_command\\(f\"\"\"\"\"\"cat > /etc/systemd/system/ngrok.service << ''EOF''\n{ngrok_service}\nEOF\"\"\"\"\"\"\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl daemon-reload && systemctl restart ngrok''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    print\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n    \n    import time\n    time.sleep\\(3\\)\n    \n    print\\(''=== ngrok status ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl status ngrok --no-pager | head -15''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nelse:\n    print\\(''ngrok not found, installing...''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''snap install ngrok''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    print\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Kill all ngrok processes ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''pkill -9 ngrok || true''\\)\ntime.sleep\\(2\\)\n\nprint\\(''=== Restart ngrok service ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl restart ngrok''\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\ntime.sleep\\(5\\)\n\nprint\\(''=== ngrok status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status ngrok --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Check ngrok logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u ngrok -n 20 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Get tunnel URL ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1:4040/api/tunnels''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nNGROK_URL = ''https://f3382bd364a0.ngrok-free.app''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Updating backend .env ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={NGROK_URL}\nPORT=3001\nEOF''''''\\)\n\nprint\\(''=== Restarting subscription-tracker ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\ntime.sleep\\(3\\)\n\nprint\\(''=== Checking status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status subscription-tracker --no-pager | head -15''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u subscription-tracker -n 10 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''\\\\n'' + ''=''*60\\)\nprint\\(''ГОТОВО!''\\)\nprint\\(f''Mini App URL: {NGROK_URL}''\\)\nprint\\(f''API URL: {NGROK_URL}/api''\\)\nprint\\(''Теперь открой @FCTracerBot и нажми /start''\\)\nprint\\(''=''*60\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\ntime.sleep\\(2\\)\n\nprint\\(''=== Full service logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u subscription-tracker -n 15 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Test nginx ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1/ | head -20''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Test API ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1/api/health''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Check dist folder ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(f''ls -la {APP_PATH}/dist/''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Check nginx error log ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''tail -20 /var/log/nginx/error.log''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Check API directly ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1:3001/''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\n# Fix permissions - nginx needs execute on directories and read on files\nprint\\(''=== Fixing permissions ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(f''chmod 755 /root''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nstdin, stdout, stderr = ssh.exec_command\\(f''chmod -R 755 {APP_PATH}/dist''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Testing nginx again ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1/''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)[:500]\\)\n\nprint\\(''=== Testing API subscriptions ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1:3001/api/subscriptions''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Getting current ngrok URL ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''curl -s http://127.0.0.1:4040/api/tunnels''\\)\noutput = stdout.read\\(\\).decode\\(''utf-8''\\)\n\nmatch = re.search\\(r''\"\"public_url\"\":\"\"\\(https://[^\"\"]+\\)\"\"'', output\\)\nif match:\n    ngrok_url = match.group\\(1\\)\n    print\\(f''URL: {ngrok_url}''\\)\n    \n    print\\(''\\\\n=== All services status ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl status subscription-tracker --no-pager | head -5''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl status ngrok --no-pager | head -5''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl status nginx --no-pager | head -5''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    \n    print\\(''=''*60\\)\n    print\\(''ГОТОВО!''\\)\n    print\\(f''Mini App URL: {ngrok_url}''\\)\n    print\\(f''API: {ngrok_url}/api''\\)\n    print\\(''Бот: @FCTracerBot''\\)\n    print\\(''=''*60\\)\nelse:\n    print\\(''Could not get URL''\\)\n    print\\(output\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\n# Stop ngrok\nprint\\(''=== Stopping ngrok ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl stop ngrok && systemctl disable ngrok''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\n# Create localhost.run service\nprint\\(''=== Creating localhost.run service ===''\\)\nservice_content = ''''''[Unit]\nDescription=Localhost.run Tunnel\nAfter=network.target\n\n[Service]\nType=simple\nUser=root\nExecStart=/usr/bin/ssh -o StrictHostKeyChecking=no -o ServerAliveInterval=60 -R 80:localhost:80 nokey@localhost.run\nRestart=always\nRestartSec=10\n\n[Install]\nWantedBy=multi-user.target\n''''''\n\nstdin, stdout, stderr = ssh.exec_command\\(f\"\"\"\"\"\"cat > /etc/systemd/system/localhost-run.service << ''EOF''\n{service_content}\nEOF\"\"\"\"\"\"\\)\n\n# Start service\nprint\\(''=== Starting localhost.run ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl daemon-reload && systemctl enable localhost-run && systemctl start localhost-run''\\)\nprint\\(stderr.read\\(\\).decode\\(''utf-8''\\)\\)\n\ntime.sleep\\(5\\)\n\n# Check status and get URL from logs\nprint\\(''=== Checking status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status localhost-run --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Getting URL from logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 20 --no-pager''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\nprint\\(logs\\)\n\n# Try to extract URL\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    print\\(f''\\\\nURL found: {url_match.group\\(1\\)}''\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Wait and check logs ===''\\)\ntime.sleep\\(5\\)\n\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run --no-pager | tail -30''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\nprint\\(logs\\)\n\n# Try to find URL\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    print\\(f''\\\\n*** URL: {url_match.group\\(1\\)} ***''\\)\nelse:\n    # Try running manually to see output\n    print\\(''\\\\n=== Trying manual SSH ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''timeout 10 ssh -o StrictHostKeyChecking=no -R 80:localhost:80 nokey@localhost.run 2>&1 || true''\\)\n    output = stdout.read\\(\\).decode\\(''utf-8''\\)\n    print\\(output\\)\n    \n    url_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', output\\)\n    if url_match:\n        print\\(f''\\\\n*** URL: {url_match.group\\(1\\)} ***''\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\n# Restart service to get fresh connection\nprint\\(''=== Restarting localhost.run service ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl restart localhost-run''\\)\ntime.sleep\\(8\\)\n\n# Get URL from logs\nprint\\(''=== Getting URL from logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 50 --no-pager''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\n\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    tunnel_url = url_match.group\\(1\\)\n    print\\(f''Found URL: {tunnel_url}''\\)\n    \n    # Update .env\n    print\\(''\\\\n=== Updating backend .env ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n    \n    # Restart bot\n    print\\(''=== Restarting bot ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n    time.sleep\\(3\\)\n    \n    # Test\n    print\\(''\\\\n=== Testing tunnel ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(f''curl -s -o /dev/null -w \"\"%{{http_code}}\"\" {tunnel_url}/''\\)\n    status = stdout.read\\(\\).decode\\(''utf-8''\\)\n    print\\(f''HTTP Status: {status}''\\)\n    \n    if status == ''200'':\n        print\\(''\\\\n'' + ''=''*60\\)\n        print\\(''READY!''\\)\n        print\\(f''Mini App: {tunnel_url}''\\)\n        print\\(''Bot: @FCTracerBot - send /start''\\)\n        print\\(''=''*60\\)\n    else:\n        stdin, stdout, stderr = ssh.exec_command\\(f''curl -s {tunnel_url}/ | head -5''\\)\n        print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\nelse:\n    print\\(''Could not find URL''\\)\n    print\\(logs[-1000:]\\)\n\nssh.close\\(\\)\n\")",
      "Bash(npm run build:all:*)",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\n# Check localhost-run status and get URL\nprint\\(''=== Getting tunnel URL ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 30 --no-pager''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\n\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    tunnel_url = url_match.group\\(1\\)\n    print\\(f''Found URL: {tunnel_url}''\\)\n    \n    # Update .env\n    print\\(''=== Updating backend .env ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n    \n    # Restart service\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n    time.sleep\\(3\\)\n    \n    # Check status\n    print\\(''=== Service status ===''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl status subscription-tracker --no-pager | head -12''\\)\n    print\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n    \n    print\\(''=''*60\\)\n    print\\(''READY!''\\)\n    print\\(f''Mini App: {tunnel_url}''\\)\n    print\\(''Bot: @FCTracerBot''\\)\n    print\\(''=''*60\\)\nelse:\n    # Restart localhost-run to get fresh URL\n    print\\(''Restarting tunnel...''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart localhost-run''\\)\n    time.sleep\\(8\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 30 --no-pager''\\)\n    logs = stdout.read\\(\\).decode\\(''utf-8''\\)\n    url_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\n    if url_match:\n        tunnel_url = url_match.group\\(1\\)\n        print\\(f''New URL: {tunnel_url}''\\)\n        \n        stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n        \n        stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n        time.sleep\\(3\\)\n        \n        print\\(''=''*60\\)\n        print\\(f''Mini App: {tunnel_url}''\\)\n        print\\(''=''*60\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Get tunnel URL ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 50 --no-pager''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\n\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    tunnel_url = url_match.group\\(1\\)\n    print\\(f''URL: {tunnel_url}''\\)\n    \n    # Test URL\n    stdin, stdout, stderr = ssh.exec_command\\(f''curl -s -o /dev/null -w \"\"%{{http_code}}\"\" {tunnel_url}/''\\)\n    status = stdout.read\\(\\).decode\\(''utf-8''\\)\n    print\\(f''Status: {status}''\\)\n    \n    if status == ''200'':\n        # Update .env\n        stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n        stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n        time.sleep\\(2\\)\n        \n        print\\(''\\\\nDONE!''\\)\n        print\\(f''Mini App: {tunnel_url}''\\)\nelse:\n    print\\(''No URL found - tunnel may be down''\\)\n    print\\(logs[-500:]\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== Recent API logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u subscription-tracker -n 50 --no-pager | grep -E \"\"\\(API|Auth|error|Error|init\\)\"\"''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Check database ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''cat /root/subscription-tracker/backend/data/db.json''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Check .env ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''cat /root/subscription-tracker/backend/.env''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\nprint\\(''=== ALL recent logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u subscription-tracker -n 100 --no-pager''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\n# Get tunnel URL\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 30 --no-pager''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\n\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    tunnel_url = url_match.group\\(1\\)\n    \n    # Update .env\n    stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n    time.sleep\\(2\\)\n    \n    print\\(f''URL: {tunnel_url}''\\)\n    print\\(''Service restarted''\\)\nelse:\n    print\\(''Tunnel URL not found, restarting...''\\)\n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart localhost-run''\\)\n    time.sleep\\(8\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 30 --no-pager''\\)\n    logs = stdout.read\\(\\).decode\\(''utf-8''\\)\n    url_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\n    if url_match:\n        tunnel_url = url_match.group\\(1\\)\n        stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n        stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n        print\\(f''URL: {tunnel_url}''\\)\n\nssh.close\\(\\)\n\")",
      "Bash(python -c \"\nimport paramiko\nimport sys\nimport time\nimport re\nsys.stdout.reconfigure\\(encoding=''utf-8'', errors=''replace''\\)\n\nHOST = ''217.60.3.122''\nUSERNAME = ''root''\nPASSWORD = ''ZiW_1qjEippLtS2xrV''\nAPP_PATH = ''/root/subscription-tracker''\n\nssh = paramiko.SSHClient\\(\\)\nssh.set_missing_host_key_policy\\(paramiko.AutoAddPolicy\\(\\)\\)\nssh.connect\\(HOST, username=USERNAME, password=PASSWORD\\)\n\n# Check tunnel status\nprint\\(''=== Tunnel status ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''systemctl status localhost-run --no-pager | head -10''\\)\nprint\\(stdout.read\\(\\).decode\\(''utf-8''\\)\\)\n\nprint\\(''=== Recent logs ===''\\)\nstdin, stdout, stderr = ssh.exec_command\\(''journalctl -u localhost-run -n 50 --no-pager''\\)\nlogs = stdout.read\\(\\).decode\\(''utf-8''\\)\nprint\\(logs[-2000:]\\)\n\nurl_match = re.search\\(r''\\(https://[a-z0-9]+\\\\.lhr\\\\.life\\)'', logs\\)\nif url_match:\n    tunnel_url = url_match.group\\(1\\)\n    print\\(f''\\\\nFound URL: {tunnel_url}''\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(f''''''cat > {APP_PATH}/backend/.env << ''EOF''\nBOT_TOKEN=8205357635:AAHuNLismxRNT1pHaDYII16VYNwzf0KHymM\nWEBAPP_URL={tunnel_url}\nPORT=3001\nEOF''''''\\)\n    \n    stdin, stdout, stderr = ssh.exec_command\\(''systemctl restart subscription-tracker''\\)\n    print\\(''Service restarted''\\)\n\nssh.close\\(\\)\n\")"
    ]
  }
}
